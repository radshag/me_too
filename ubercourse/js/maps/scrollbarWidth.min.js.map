{"version":3,"sources":["scrollbarWidth.js"],"names":["document","addEventListener","scrollbarWidth","sbw","getScrollbarWidth","docEl","documentElement","widthWithSB","widthWithoutSB","style","overflowY","clientWidth","window","innerWidth","addToAllPages","_","addOnResize","start","performance","now","windowHeight","innerHeight","pages","getElementsByClassName","sbwPixels","body","classList","add","i","length","paddingRight","offsetHeight","remove","console","log","Math","round","addPaddingToPage","page"],"mappings":";;;;;;;;;;GAQAA,SAASC,gBAAT,CAA0B,kBAA1B,CAA8CC,cAA9C,EAEA,QAASA,eAAT,EAA0B,CAKxB,GAAIC,KAAM,QAASC,kBAAT,EAA6B,CACrC,GAAIC,OAAQL,SAASM,eAArB,CACA,GAAIC,YAAJ,CACA,GAAIC,eAAJ,CAMAH,MAAMI,KAAN,CAAYC,SAAZ,CAAwB,QAAxB,CACAH,YAAeF,MAAMM,WAArB,CACAH,eAAiBI,OAAOC,UAAxB,CACAR,MAAMI,KAAN,CAAYC,SAAZ,CAAwB,EAAxB,CASA,MAAOF,gBAAiBD,WAAxB,CACD,CAtBS,EAAV,CAyBA,GAAIJ,MAAQ,CAAZ,CAAe,CACb,MAAO,MAAP,CACD,CAGDW,gBAGAC,EAAEC,WAAF,CAAc,gBAAd,CAAgCF,aAAhC,CAA+C,GAA/C,EAMA,QAASA,cAAT,EAAyB,CACvB,GAAIG,OAAQC,YAAYC,GAAZ,EAAZ,CACA,GAAIC,cAAeR,OAAOS,WAA1B,CACA,GAAIC,OAAQtB,SAASuB,sBAAT,CAAgC,MAAhC,CAAZ,CACA,GAAIC,WAAYrB,IAAM,IAAtB,CAGAH,SAASyB,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,yBAA5B,EAEA,GAAIC,GAAIN,MAAMO,MAAd,CACA,MAAOD,GAAP,CAAY,CACVN,MAAMM,CAAN,EAASnB,KAAT,CAAeqB,YAAf,CACGR,MAAMM,CAAN,EAASG,YAAT,CAAwBX,YAAzB,CACII,SADJ,CAEI,EAHN,CAID,CAEDxB,SAASyB,IAAT,CAAcC,SAAd,CAAwBM,MAAxB,CAA+B,yBAA/B,EACAC,QAAQC,GAAR,CACE,yBADF,CAEEC,KAAKC,KAAL,CAAW,CAAClB,YAAYC,GAAZ,GAAoBF,KAArB,EAA4B,EAAvC,EAA2C,EAF7C,CAGE,+BAHF,CAIEK,MAAMO,MAJR,CAKE,OALF,EAOD,CAEDjB,OAAOyB,gBAAP,CAA0B,QAASA,iBAAT,CAA0BC,IAA1B,CAAgC,CACxD,GAAIlB,cAAeR,OAAOS,WAA1B,CACA,GAAIG,WAAYrB,IAAM,IAAtB,CAEAmC,KAAK7B,KAAL,CAAWqB,YAAX,CACGQ,KAAKP,YAAL,CAAoBX,YAArB,CACII,SADJ,CAEI,EAHN,CAID,CARD,CASD","file":"../scrollbarWidth.min.js","sourcesContent":["/**\r\n * The `main.pages` element has `width: 100vw` to prevent jumping\r\n * during a transition from a page with a scrollbar to a page\r\n * without a scrollbar. This function then adds `padding-right`\r\n * to each page taller than the window to keep its content centered\r\n * when it causes a scrollbar.\r\n */\r\n\r\ndocument.addEventListener('DOMContentLoaded', scrollbarWidth);\r\n\r\nfunction scrollbarWidth() {\r\n\r\n  /**\r\n   * Store the scrollbar width (sbw) returned by an IIFE\r\n   */\r\n  var sbw = function getScrollbarWidth() {\r\n    var docEl = document.documentElement;\r\n    var widthWithSB;\r\n    var widthWithoutSB;\r\n\r\n    // // let's see how long it takes to measure the scrollbar\r\n    // var start = performance.now();\r\n\r\n    // measure the document width, with and without scrollbars\r\n    docEl.style.overflowY = 'scroll';\r\n    widthWithSB =  docEl.clientWidth;\r\n    widthWithoutSB = window.innerWidth;\r\n    docEl.style.overflowY = '';\r\n\r\n    // // log the time\r\n    // console.log(\r\n    //   'scrollbarWidth.js spent',\r\n    //   Math.round((performance.now() - start)*10)/10,\r\n    //   'ms measuring the scrollbar'\r\n    // );\r\n\r\n    return widthWithoutSB - widthWithSB;\r\n  } ();\r\n\r\n  // If the scrollbars have no width, then abort\r\n  if (sbw === 0) {\r\n    return false;\r\n  }\r\n\r\n  // add the padding to all pages on a later animation frame\r\n  addToAllPages();\r\n\r\n  // and again on window resize, with debouncing\r\n  _.addOnResize('scrollbarWidth', addToAllPages, 250);\r\n\r\n  /**\r\n   * loops through all `.page` elements and adds\r\n   * padding to those that need it\r\n   */\r\n  function addToAllPages() {\r\n    var start = performance.now();\r\n    var windowHeight = window.innerHeight;\r\n    var pages = document.getElementsByClassName('page');\r\n    var sbwPixels = sbw + 'px';\r\n\r\n    // set `height:auto!important` and `display:block!important` on all pages\r\n    document.body.classList.add('-measuring-page-heights');\r\n\r\n    var i = pages.length;\r\n    while (i--) {\r\n      pages[i].style.paddingRight =\r\n        (pages[i].offsetHeight > windowHeight)\r\n          ? sbwPixels\r\n          : '';\r\n    }\r\n\r\n    document.body.classList.remove('-measuring-page-heights');\r\n    console.log(\r\n      'scrollbarWidth.js spent',\r\n      Math.round((performance.now() - start)*10)/10,\r\n      'ms checking for scrollbars on',\r\n      pages.length,\r\n      'pages'\r\n    );\r\n  }\r\n\r\n  window.addPaddingToPage = function addPaddingToPage(page) {\r\n    var windowHeight = window.innerHeight;\r\n    var sbwPixels = sbw + 'px';\r\n\r\n    page.style.paddingRight =\r\n      (page.offsetHeight > windowHeight)\r\n        ? sbwPixels\r\n        : '';\r\n  };\r\n};\r\n"]}