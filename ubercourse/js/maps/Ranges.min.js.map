{"version":3,"sources":["Ranges.js"],"names":["w","Ranges","init","initRanges","instances","disable","disableRange","id","console","error","parent","document","ranges","querySelectorAll","i","iMax","length","initRange","call","range","thumb","querySelector","input","min","parseFloat","getAttribute","max","step","value","thumbWidth","getBoundingClientRect","width","trackWidth","parentElement","stepWidth","stepElements","labelElements","displayValue","addEventListener","_","throttle","snapToIndex","valueToIndex","getStepWidth","rangeDraggable","Draggable","type","bounds","parentNode","edgeResistance","cursor","onDragEnd","Math","round","x","j","jMax","bind","enabled","TweenLite","to","indexToValue","v","toString","split","window"],"mappings":"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","file":"../Ranges.min.js","sourcesContent":[";(function (w) {\r\n  w.Ranges = {\r\n    init: initRanges, \r\n    instances: {},\r\n    disable: disableRange\r\n  };\r\n  \r\n  initRanges();\r\n\r\n  function disableRange(id) {\r\n    if (w.Ranges.instances[id]) {\r\n      w.Ranges.instances[id].disable();\r\n    } else {\r\n      console.error(`Ranges.instances.${id} does not exist.`)\r\n    }\r\n  }\r\n\r\n  function initRanges(parent) {\r\n    parent = parent || document;\r\n    var ranges = parent.querySelectorAll('.range');\r\n\r\n    for (var i = 0, iMax = ranges.length; i < iMax; i++) {\r\n      initRange.call(ranges[i]); \r\n    }\r\n\r\n    function initRange() {\r\n      var range = this;\r\n      var thumb = range.querySelector('.range__thumb');\r\n      var input = range.querySelector('.range__input');\r\n      var min   = parseFloat(input.getAttribute('min'));\r\n      var max   = parseFloat(input.getAttribute('max'));\r\n      var step  = parseFloat(input.getAttribute('step'));\r\n      var value = parseFloat(input.getAttribute('value'));\r\n      var thumbWidth = thumb.getBoundingClientRect().width;\r\n      var trackWidth = thumb.parentElement.getBoundingClientRect().width - thumbWidth * 2;\r\n      var stepWidth = trackWidth * step / (max - min);\r\n      var stepElements = range.querySelectorAll('.range__step');\r\n      var labelElements = range.querySelectorAll('.range__label');\r\n      var displayValue = range.querySelector('.range__thumb-value');\r\n\r\n       \r\n      w.addEventListener('resize', _.throttle(function () {\r\n        snapToIndex(valueToIndex(value));\r\n      }, 100));\r\n\r\n      function getStepWidth() {\r\n        return stepElements[1].getBoundingClientRect().width;   \r\n      }\r\n\r\n      var rangeDraggable = new Draggable(thumb, {\r\n        type:\"x\", \r\n        bounds: thumb.parentNode,\r\n        edgeResistance: 1,\r\n        cursor: 'inherit',\r\n        onDragEnd: function () {\r\n          snapToIndex(Math.round(this.x / getStepWidth()));\r\n        },\r\n      });\r\n      \r\n      if (range.id) {\r\n        w.Ranges.instances[range.id] = rangeDraggable;      \r\n      }\r\n\r\n      for (var j = 0, jMax = stepElements.length; j < jMax; j++) {\r\n        // TODO: convert to event delegation\r\n        stepElements[j].addEventListener('click',     snapToIndex.bind(null, j));\r\n        stepElements[j].addEventListener('mousedown', snapToIndex.bind(null, j));\r\n        stepElements[j].addEventListener('mouseup',   snapToIndex.bind(null, j));\r\n      }\r\n      \r\n      for (j = 0, jMax = labelElements.length; j < jMax; j++) {\r\n        // TODO: convert to event delegation\r\n        labelElements[j].addEventListener('click', \r\n          snapToIndex.bind(null, valueToIndex(parseFloat(this.getAttribute('data-label-value'))))\r\n        );\r\n      }\r\n      \r\n      snapToIndex(valueToIndex(value));\r\n      \r\n      function snapToIndex(i) {\r\n        if (!rangeDraggable.enabled()) {\r\n          return false;\r\n        }\r\n\r\n        if (i < 0) {\r\n          i = 0;\r\n        } else if (i > valueToIndex(max)) {\r\n          i = valueToIndex(max);\r\n        }\r\n        \r\n        TweenLite.to(thumb, 0.2, {x: i * getStepWidth()});\r\n        value = indexToValue(i);      \r\n        input.value = value;\r\n      }\r\n      \r\n      function valueToIndex(v) {\r\n        var i = (v - min) / step;\r\n        \r\n        // remove small fractions caused by float precision\r\n        return parseFloat(i.toString().split('0000')[0]);\r\n      }\r\n      \r\n      function indexToValue(i) {\r\n        if (i < 0) {\r\n          i = 0;\r\n        } else if (i > valueToIndex(max)) {\r\n          i = valueToIndex(max);\r\n        }\r\n        \r\n        var v = step * i + min;\r\n        \r\n        // remove small fractions caused by float precision\r\n        return parseFloat(v.toString().split('0000')[0]);\r\n      }\r\n      \r\n    }\r\n  }\r\n})(window);\r\n"]}