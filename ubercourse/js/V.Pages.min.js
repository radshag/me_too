/**
 * V.Pages.js
 * Ubercourse v0.15.0
 * 
 * VinciWorks
 * https://vinciworks.com/
 * Copyright (c) 2017-2018 VinciWorks, All Rights Reserved.
 * 
 * Updated: Tue, 06 Mar 2018 14:03:46 GMT
 * 
 */;(function initPages(V){if(!V){console.error('V not defined!');return false;}V.Pages={load:loadPages,init:initPage};var newPageEvent=new CustomEvent('newpage',{bubbles:true,cancelable:true});var pages=document.getElementsByClassName('page');var childPages=document.getElementsByClassName('child-page');for(var i=pages.length;i--;){initPage(pages[i]);}function initPage(page){var pageElement=void 0;if(typeof page==='string'){pageElement=document.getElementById(page);}else if(page instanceof HTMLElement){pageElement=page;}if(!pageElement){debugger;console.error('Couldnâ€™t find that page.');return false;}var id=pageElement.id;if(!id){console.error('A page is missing an id.');return false;}if(!V.Pages[id]){V.Pages[id]={};}V.Pages[id].element=pageElement;var attributes=pageElement.attributes;var propertyName=void 0;var attributeValue=void 0;for(var _i=0,iMax=attributes.length;_i<iMax;_i++){if(attributes[_i].name.indexOf('data-')===0){propertyName=dataToCamelCase(attributes[_i].name);V.Pages[id][propertyName]=attributes[_i].value;}}var childPages=pageElement.getElementsByClassName('child-page');var childId=void 0;for(var j=0,jMax=childPages.length;j<jMax;j++){initPage(childPages[j]);childId=childPages[j].id;V.Pages[childId].parent=id;V.Pages[id].children=V.Pages[id].children||[];V.Pages[id].children.push(childId);}function dataToCamelCase(str){var arr=str.slice(5).split('-');var i=arr.length;while(--i){arr[i]=arr[i][0].toUpperCase()+arr[i].slice(1);}return arr.join('');}return V.Pages[id];}function loadPages(url,options){options=options||{};var newHTML=document.createElement('div');var xhr=new XMLHttpRequest();var onPageAdded=options.onPageAdded||function(){};var onAllPagesAdded=options.onAllPagesAdded||function(){};var pagesContainer=document.getElementsByClassName('page')[0].parentNode;var lightboxesContainer=document.getElementsByClassName('lightboxes')[0];xhr.open('GET',url,true);xhr.onreadystatechange=function(){if(this.readyState!==4){return false;}if(this.status!==200){if(typeof V.Pages.onLoadError==='function'){V.Pages.onLoadError();}return false;}htmlString=this.responseText;if(options.filterHTML){htmlString=options.filterHTML(htmlString);}newHTML.innerHTML=htmlString;var addedPages=[];var addedLightboxes=[];var pages=newHTML.getElementsByClassName('page');var lightboxes=newHTML.getElementsByClassName('lightbox');for(var _i2=0,iMax=lightboxes.length;_i2<iMax;_i2++){var lightbox=lightboxesContainer.appendChild(lightboxes[0]);addedLightboxes.push(lightbox);}for(var _i3=0,_iMax=pages.length;_i3<_iMax;_i3++){var page=pagesContainer.appendChild(pages[0]);addedPages.push(page);registerPage(page);onPageAdded(page,_i3,_iMax);page.dispatchEvent(newPageEvent);}onAllPagesAdded(addedPages,addedLightboxes);};xhr.send();}})(window.V);
//# sourceMappingURL=maps/V.Pages.min.js.map
