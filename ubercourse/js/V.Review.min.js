/**
 * V.Review.js
 * Ubercourse v0.15.0
 * 
 * VinciWorks
 * https://vinciworks.com/
 * Copyright (c) 2017-2018 VinciWorks, All Rights Reserved.
 * 
 * Updated: Tue, 06 Mar 2018 14:03:46 GMT
 * 
 */;(function initReview(V){V.Review={isInternal:isInternal,isLocal:isLocal,isActive:isActive};function isInternal(){return window.location.href.indexOf('://uk.onlinecompliance.org/SharedScormCourses2012/CustomScormCourses/Internal/')!==-1;}function isLocal(){return window.location.href.indexOf('://localhost:')!==-1;}function isActive(){return isInternal()||isLocal();}if(isActive()){if(isInternal()&&!V.SCORM.get('custom firm code')){var defaultFirm='INTERNAL';var customFirm=(window.prompt('Type a firm code, or press Enter to use "'+defaultFirm+'".')||defaultFirm).toUpperCase();V.SCORM.set('Var_firm_name',customFirm);V.SCORM.set('custom firm code',customFirm);console.log('custom firm code: "'+customFirm+'"');}document.addEventListener('DOMContentLoaded',function(){var lastCommit=V.Project.config.lastCommit||'Not available :/';var frag=document.createElement('div');var pageIds=[];var pages=document.querySelectorAll('.page, .child-page');for(var i=0,iMax=pages.length;i<iMax;i++){pageIds.push(pages[i].id);}menuHTML=pageIds.map(function(id){return('\n        <span \n          onclick="V.Navigation.go(\''+id+'\');V.Lightboxes.close();"\n          style="line-height:24px;border:2px solid #fff; font-size: 0.8em; border-width: 3px 0px 2px; background:rgba(0,0,0,0.06); cursor:pointer; padding:2px 8px; margin: 3px; display: inline-block; vertical-align: bottom; border-bottom-color:rgba(0,0,0,0.4); '+(V.Pages[id].parent?'opacity: 0.5;':'')+' " \n        >\n          '+(V.Pages[id].title||'')+' <span style="opacity:0.5;font-family:monospace;">('+id+')</span>\n        </span>\n      ').trim();}).join(' ');frag.innerHTML='\n        <div class="lightbox -has-close-button" id="lightbox-review-panel">\n          <div class="lightbox__overlay"></div>\n          <div class="lightbox__box" style="padding: 0 1em">\n            <div class="lightbox__close-button" style="display:none;">Close</div>\n            <div class="lightbox__content" style="max-height: 70vh;margin: 1em 0;">\n\n              <h2 style="margin-top:1em;text-align:center;">Review Panel</h2>\n\n              <h3>Latest commit</h3>\n              <pre style="max-height:15em;font-size:0.8em;padding:0.5em;overflow-y:auto;background:rgba(0,0,0,0.05)">'+lastCommit.replace(/</g,'&lt;').trim()+'</pre>\n\n\n              <h3>Localhost link</h3>\n              <p>This link will open the course on localhost with your current location and data:\n              <pre style="max-height:15em;font-size:0.8em;padding:0.5em;overflow-y:auto;background:rgba(0,0,0,0.05)"><a href="'+V.SCORM.log()+'" target="_blank" id="review-panel-localhost-link">'+V.SCORM.log()+'</a></pre>\n\n              <h3>Go somewhere</h3>\n              <form onsubmit="V.Navigation.go(this.querySelector(\'input\').value);V.Lightboxes.close();return false;">\n                <p><input style="width:100%;padding:0.5em;" placeholder="Type a page ID and press Enter"/></p>\n              </form>\n              <p>\n                '+menuHTML+'\n              </p>\n\n              '+(isInternal()?'              \n              <h3>Reset the course</h3>\n              <p>Click this button to reset everything you\'ve done since enrolling in the course: your custom firm code, suspend data, location, score, and completion status. This button also refreshes the window.</p>\n              <p style="text-align:center;">\n                <button style="padding:1em 1.5em;" onclick="V.Review.reset()">Reset</button>\n              </p>\n              ':'')+'\n            </div>\n          </div>\n        </div>\n      ';document.querySelector('.lightboxes').appendChild(frag.firstElementChild);V.Review.openPanel=function openPanel(){var localhostLink=document.getElementById('review-panel-localhost-link');localhostLink.href=V.SCORM.log();localhostLink.textContent=V.SCORM.log();V.Lightboxes.open('lightbox-review-panel');};document.addEventListener('keydown',function reviewKeyDown(event){if(isUserTyping(event)){return false;}if(event.keyCode==80){V.Review.openPanel();}});V.Review.reset=function resetCourse(){if(isInternal()){pipwerks.SCORM.set('cmi.suspend_data','');V.SCORM.setScore(0);V.SCORM.setLocation('');V.SCORM.setLessonStatus('incomplete');window.parent.location.reload();}else{console.log('Not internal.');return false;}};});}function isUserTyping(event){return event.type.indexOf('key')!==1&&['input','textarea'].indexOf(event.target.tagName.toLowerCase())!==-1;}})(window.V);
//# sourceMappingURL=maps/V.Review.min.js.map
